import{a as k,Q as D}from"./QToolbar.e08e31dd.js";import{Q as g}from"./QInput.4c1fb8fe.js";import{j as I,c as N,h as C,A as S,aA as P,aB as U,a2 as E,S as R,_ as J,r as m,aL as K,I as M,J as b,K as Q,L as t,d as e,M as n,aa as p,Q as y,aH as w,aG as O,ay as d,x as j}from"./index.7f3ba645.js";import{n as G,o as H,l as r,q as F}from"./QSelect.8ec0c3c9.js";import{Q as W,l as u}from"./use-timeout.2d83833b.js";import{Q as X}from"./QList.d376259e.js";import{Q as Y}from"./QTd.3f015520.js";import{Q as Z,a as T}from"./QTable.2a36f1bc.js";import{b as $,a as ee}from"./QCard.5a960ea4.js";import{Q as ae}from"./QPage.d924841a.js";import{T as te,o as le}from"./index.09194b24.js";import{j as oe}from"./index.5fd7bf99.js";import{f as ne}from"./baw_api.2cb6d836.js";import"./use-key-composition.450dd12f.js";import"./use-dark.4c8cd3f0.js";import"./axios.898b20c0.js";var V=I({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(a,{slots:o}){const i=N(()=>`q-card__section q-card__section--${a.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>C(a.tag,{class:i.value},S(o.default))}}),se=I({name:"QCardActions",props:{...P,vertical:Boolean},setup(a,{slots:o}){const i=U(a),l=N(()=>`q-card__actions ${i.value} q-card__actions--${a.vertical===!0?"vert column":"horiz row"}`);return()=>C("div",{class:l.value},S(o.default))}});function x(a){if(a===!1)return 0;if(a===!0||a===void 0)return 1;const o=parseInt(a,10);return isNaN(o)?0:o}var re=E({name:"close-popup",beforeMount(a,{value:o}){const i={depth:x(o),handler(l){i.depth!==0&&setTimeout(()=>{const f=G(a);f!==void 0&&H(f,l,i.depth)})},handlerKey(l){R(l,13)===!0&&i.handler(l)}};a.__qclosepopup=i,a.addEventListener("click",i.handler),a.addEventListener("keyup",i.handlerKey)},updated(a,{value:o,oldValue:i}){o!==i&&(a.__qclosepopup.depth=x(o))},beforeUnmount(a){const o=a.__qclosepopup;a.removeEventListener("click",o.handler),a.removeEventListener("keyup",o.handlerKey),delete a.__qclosepopup}});const ie=[{name:"taskName",label:"Task name",align:"left",field:a=>a.displayName,sortable:!0},{name:"startTime",label:"Start time",align:"left",field:a=>a.startTime,sortable:!0},{name:"priority",label:"Priority",align:"left",field:a=>a.priorityName,sortable:!0},{name:"assignedTo",label:"Assigned to",align:"left",field:a=>a.assignedToDisplayName,sortable:!0},{name:"dueDate",label:"Due date",align:"left",field:a=>a.dueTime,sortable:!0},{name:"taskId",label:"Task id",align:"left",field:a=>a.tkiid,sortable:!0},{name:"status",label:"Status",align:"left",field:a=>a.status,sortable:!0},{name:"actions",align:"left",label:"Actions"}];function de(a){a=JSON.parse(a);var o=JSON.stringify(JSON.parse(a),null,4);return console.log(o),o}const ue={components:{Codemirror:te},setup(){const a=[oe(),le],o=m("25175"),i=m(""),l=m(""),f=m(""),_=m(),h=m(),s=m(""),v=m(!1),q=K();function A(c){q.value=c.view}function L(){ne(i.value,l.value,f.value,o.value,function(c){console.log(c),_.value=c.data,h.value=[c.data.executionTree.root],console.log(c.data.executionTree.root)})}function z(){s.value=de(_.value.data),v.value=!0}function B(c){s.value=JSON.stringify(c,null,4),v.value=!0}return{instanceID:o,url:i,username:l,password:f,instance:_,search:L,columns:ie,code_dialog_viz:v,extensions:a,code:s,handleReady:A,showTaskData:B,showInstanceData:z,treeNode:h}}},ce={class:"q-pa-md q-gutter-md"},me={key:1},fe={class:"q-pa-md q-gutter-md"},pe=p("h6",null,"Execution Tree",-1),_e=p("div",{class:"text-h6"},"Variables",-1);function he(a,o,i,l,f,_){const h=M("codemirror");return b(),Q(ae,null,{default:t(()=>[e(D,{class:"bg-primary text-white"},{default:t(()=>[e(k,null,{default:t(()=>[n("Search Details")]),_:1})]),_:1}),p("div",ce,[e(g,{filled:"",modelValue:l.instanceID,"onUpdate:modelValue":o[0]||(o[0]=s=>l.instanceID=s),label:"Instance ID"},null,8,["modelValue"]),e(g,{filled:"",modelValue:l.url,"onUpdate:modelValue":o[1]||(o[1]=s=>l.url=s),label:"URL"},null,8,["modelValue"]),e(g,{filled:"",modelValue:l.username,"onUpdate:modelValue":o[2]||(o[2]=s=>l.username=s),label:"Username"},null,8,["modelValue"]),e(g,{filled:"",modelValue:l.password,"onUpdate:modelValue":o[3]||(o[3]=s=>l.password=s),type:"password",label:"Password"},null,8,["modelValue"]),p("div",null,[e(y,{color:"primary",icon:"search",onClick:l.search},{default:t(()=>[n("Search")]),_:1},8,["onClick"])])]),l.instance?(b(),Q(D,{key:0,class:"bg-primary text-white"},{default:t(()=>[e(k,null,{default:t(()=>[n("Instance Details")]),_:1})]),_:1})):w("",!0),l.instance?(b(),O("div",me,[p("div",fe,[e(X,{bordered:"",separator:""},{default:t(()=>[e(W,null,{default:t(()=>[e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[n("Instance ID")]),_:1}),e(r,{caption:""},{default:t(()=>[n(d(l.instance.piid),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[n("Status")]),_:1}),e(r,{caption:""},{default:t(()=>[n(d(l.instance.executionState),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[n("Instance Name")]),_:1}),e(r,{caption:""},{default:t(()=>[n(d(l.instance.name),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[n("Instance Creation Time")]),_:1}),e(r,{caption:""},{default:t(()=>[n(d(l.instance.creationTime),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[n("Last Modification Date")]),_:1}),e(r,{caption:""},{default:t(()=>[n(d(l.instance.lastModificationTime),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[n("Process App Name")]),_:1}),e(r,{caption:""},{default:t(()=>[n(d(l.instance.processAppName),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[n("Snapshot Name")]),_:1}),e(r,{caption:""},{default:t(()=>[n(d(l.instance.snapshotName),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[n("Branch Name")]),_:1}),e(r,{caption:""},{default:t(()=>[n(d(l.instance.branchName),1)]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(r,null,{default:t(()=>[n("Due Date")]),_:1}),e(r,{caption:""},{default:t(()=>[n(d(l.instance.dueDate),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(y,{color:"primary",onClick:l.showInstanceData},{default:t(()=>[n("View Instance Data")]),_:1},8,["onClick"]),e(Z,{title:"Task",rows:l.instance.tasks,columns:l.columns,"row-key":"name"},{"body-cell-actions":t(s=>[e(Y,{props:s},{default:t(()=>[e(y,{flat:"",color:"primary",size:"sm",label:"View data",onClick:v=>l.showTaskData(s.row.data)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"]),pe,e($,{"node-key":"nodeId",nodes:l.treeNode,"label-key":"name"},null,8,["nodes"])])])):w("",!0),e(F,{modelValue:l.code_dialog_viz,"onUpdate:modelValue":o[5]||(o[5]=s=>l.code_dialog_viz=s),"full-width":""},{default:t(()=>[e(ee,null,{default:t(()=>[e(V,null,{default:t(()=>[_e]),_:1}),e(T),e(V,{class:"scroll",style:{"max-height":"550px"}},{default:t(()=>[e(h,{modelValue:l.code,"onUpdate:modelValue":o[4]||(o[4]=s=>l.code=s),style:{height:"500px"},autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:l.extensions,onReady:l.handleReady},null,8,["modelValue","extensions","onReady"])]),_:1}),e(T),e(se,{align:"right"},{default:t(()=>[j(e(y,{flat:"",label:"Close",color:"primary"},null,512),[[re]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Ae=J(ue,[["render",he]]);export{Ae as default};
