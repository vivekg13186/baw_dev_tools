import{_ as L,H as O,G as E,r as i,o as I,J as R,K as $,L as t,d as o,Q as c,M as u,ay as G,aa as _,N as S}from"./index.7f3ba645.js";import{a as H,Q as J}from"./QToolbar.e08e31dd.js";import{Q as A}from"./QInput.4c1fb8fe.js";import{Q as V}from"./QTd.3f015520.js";import{Q as w}from"./QTable.2a36f1bc.js";import{Q as K}from"./QSplitter.12830cc5.js";import{Q as j}from"./QPage.d924841a.js";import{u as F}from"./use-quasar.c7be712f.js";import{g as W,a as X,c as Q}from"./baw_api.2cb6d836.js";import"./use-key-composition.450dd12f.js";import"./use-dark.4c8cd3f0.js";import"./QList.d376259e.js";import"./QSelect.8ec0c3c9.js";import"./use-timeout.2d83833b.js";import"./TouchPan.ea08c096.js";import"./touch.3df10340.js";import"./axios.898b20c0.js";const Y=[{name:"appName",required:!0,label:"App name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"shortName",required:!0,label:"ID",align:"left",field:e=>e.shortName,format:e=>`${e}`,sortable:!0},{name:"defaultBranch",required:!0,label:"Default Branch",align:"left",field:e=>e.defaultVersion,format:e=>`${e}`,sortable:!0},{name:"count",required:!0,label:"Snapshot Count",align:"left",field:e=>e.installedSnapshots?e.installedSnapshots.length:"",format:e=>`${e}`,sortable:!0},{name:"actions",align:"left",label:"Actions"}],Z=[{name:"snapshotName",required:!0,label:"Snapshot name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"shortName",required:!0,label:"ID",align:"left",field:e=>e.acronym,format:e=>`${e}`,sortable:!0},{name:"branchName",required:!0,label:"Branch",align:"left",field:e=>e.branchName,format:e=>`${e}`,sortable:!0},{name:"createdOn",required:!0,label:"Created On",align:"left",field:e=>e.createdOn,format:e=>`${e}`,sortable:!0},{name:"active",field:e=>e.active,format:e=>`${e}`,label:"Active",align:"left",sortable:!0},{name:"actions",align:"left",label:"Actions"}],ee={setup(){const e=F(),n=O(),b=E(),a=i(b.params.id),N=i(b.params.name),v=i([]),l=i([]),m=i(!0),k=i(!0),q=i(50),p=i([]),y=i(""),f=i([]),g=i(""),C=i(""),T=i(""),D=i("");function z(){W(a.value,s=>{k.value=!1;var s=s.data.processAppsList;l.value.splice(0,l.value.length,...s)},r=>{k.value=!1})}function B(){X(a.value,s=>{m.value=!1;var s=s.data.processAppsList;v.value.splice(0,v.value.length,...s)},r=>{m.value=!1})}function M(r){p.value.splice(0,p.value.length),y.value=`${r.name}(${r.shortName})`,g.value=r.shortName,p.value.splice(0,p.value.length,...r.installedSnapshots)}function x(r){n.push({name:"viewSnapshot",query:{con:a.value,appName:y.value,appSName:g.value,snapId:r.ID,snapSName:r.acronym,snapName:r.name}})}function U(r){for(var s=f.value,d=0;d<s.length;d++){var h=s[d].acronym;console.log(s[d]),Q(a.value,g.value,h,r,`Error ${r} snapshot ${h}`,function(ne){e.notify(`${r} snapshot ${h}`)})}}function P(){var r=f.value,s="make_default";if(r.length==1){var d=r[0].acronym;Q(a.value,g.value,d,s,`Error ${s} snapshot ${d}`,function(h){e.notify(`${s} snapshot ${d}`)})}else e.notify("Make default need single selection")}return I(()=>{B(),z()}),{connection:a,loading_toolkits:k,connectionName:N,columns:Y,apps:v,loading_apps:m,toolkits:l,splitterModel:q,showSnapshots:M,snapshot_columns:Z,snapshots:p,selected_app:y,selected:f,openSnapshotPage:x,filter1:C,filter3:D,filter2:T,makeDefault:P,doAction:U,getSelectedString(){return f.value.length===0?"":`${f.value.length} record${f.value.length>1?"s":""} selected of ${p.value.length}`}}}},ae={class:"q-pa-md q-gutter-md"},le={class:"q-pa-sm q-gutter-lg"},oe={class:"q-pa-sm q-gutter-md"};function te(e,n,b,a,N,v){return R(),$(j,null,{default:t(()=>[o(J,{class:"bg-primary text-white"},{default:t(()=>[o(c,{flat:"",round:"",dense:"",icon:"arrow_back",to:"/"}),o(H,null,{default:t(()=>[u(G(a.connectionName)+" -Applications and Toolkits",1)]),_:1})]),_:1}),_("div",ae,[o(K,{modelValue:a.splitterModel,"onUpdate:modelValue":n[8]||(n[8]=l=>a.splitterModel=l)},{before:t(()=>[o(w,{title:"Applications",rows:a.apps,columns:a.columns,"row-key":"name",loading:a.loading_apps,filter:a.filter1},{"top-right":t(()=>[o(A,{borderless:"",dense:"",debounce:"300",modelValue:a.filter1,"onUpdate:modelValue":n[0]||(n[0]=l=>a.filter1=l),placeholder:"Search"},{append:t(()=>[o(S,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":t(l=>[o(V,{props:l},{default:t(()=>[o(c,{flat:"",color:"primary",size:"sm",label:"View Snapshots","no-caps":"",onClick:m=>a.showSnapshots(l.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","filter"]),o(w,{title:"Toolkits",rows:a.toolkits,columns:a.columns,"row-key":"name",loading:a.loading_toolkits,filter:a.filter2},{"top-right":t(()=>[o(A,{borderless:"",dense:"",debounce:"300",modelValue:a.filter2,"onUpdate:modelValue":n[1]||(n[1]=l=>a.filter2=l),placeholder:"Search"},{append:t(()=>[o(S,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":t(l=>[o(V,{props:l},{default:t(()=>[o(c,{flat:"",color:"primary",size:"sm",label:"View Snapshots","no-caps":"",onClick:m=>a.showSnapshots(l.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","filter"])]),after:t(()=>[_("div",le,[_("div",oe,[o(c,{flat:"",size:"sm","no-caps":"",color:"primary",onClick:a.makeDefault},{default:t(()=>[u("Make Default")]),_:1},8,["onClick"]),o(c,{flat:"",size:"sm",color:"primary","no-caps":"",onClick:n[2]||(n[2]=l=>a.doAction("activate"))},{default:t(()=>[u("Activate")]),_:1}),o(c,{flat:"",size:"sm",color:"primary","no-caps":"",onClick:n[3]||(n[3]=l=>a.doAction("deactivate"))},{default:t(()=>[u("DeActivate")]),_:1}),o(c,{"no-caps":"",flat:"",size:"sm",color:"primary",onClick:n[4]||(n[4]=l=>a.doAction("stop"))},{default:t(()=>[u("Stop")]),_:1}),o(c,{flat:"",size:"sm","no-caps":"",color:"primary",onClick:n[5]||(n[5]=l=>a.doAction("archive"))},{default:t(()=>[u("Archive")]),_:1})]),o(w,{title:"Snapshots - "+a.selected_app,rows:a.snapshots,columns:a.snapshot_columns,"row-key":"acronym",selection:"multiple","selected-rows-label":a.getSelectedString,selected:a.selected,"onUpdate:selected":n[7]||(n[7]=l=>a.selected=l),filter:a.filter3},{"top-right":t(()=>[o(A,{borderless:"",dense:"",debounce:"300",modelValue:a.filter3,"onUpdate:modelValue":n[6]||(n[6]=l=>a.filter3=l),placeholder:"Search"},{append:t(()=>[o(S,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":t(l=>[o(V,{key:"action",props:l},{default:t(()=>[o(c,{flat:"",color:"primary",size:"sm",label:"View Config","no-caps":"",onClick:m=>a.openSnapshotPage(l.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["title","rows","columns","selected-rows-label","selected","filter"])])]),_:1},8,["modelValue"])])]),_:1})}var Ae=L(ee,[["render",te]]);export{Ae as default};
