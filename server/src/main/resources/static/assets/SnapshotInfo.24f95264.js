import{j as X,O as Y,P as pe,c as h,h as r,N as z,v as he,aA as _e,aB as Se,aC as ke,A as oe,aD as ye,r as b,w as M,l as qe,g as we,x as xe,aE as Te,U as Ie,aF as re,_ as Z,J as f,K as E,L as v,d as t,M as ee,ay as P,aG as k,aH as L,F as A,aI as j,G as Ce,H as Qe,o as Ve,I as K,Q as Ee,aa as W}from"./index.7f3ba645.js";import{a as Ne,Q as $e}from"./QToolbar.e08e31dd.js";import{Q as T,a as Be,b as I,c as Le}from"./QTabPanels.8f74b4ac.js";import{a as J,Q as se}from"./QTable.2a36f1bc.js";import{Q as Pe,a as ie,b as Ae}from"./QCard.5a960ea4.js";import{Q as je}from"./QPage.d924841a.js";import{u as De}from"./use-quasar.c7be712f.js";import{u as Oe,e as Re,h as He,Q as Ue,l as F}from"./use-timeout.2d83833b.js";import{l as te}from"./QSelect.8ec0c3c9.js";import{u as Ge,a as Me}from"./use-dark.4c8cd3f0.js";import{k as ne}from"./use-key-composition.450dd12f.js";import{b as Ke,c as V}from"./baw_api.2cb6d836.js";import"./QResizeObserver.89ca0fad.js";import"./touch.3df10340.js";import"./QList.d376259e.js";import"./axios.898b20c0.js";var le=X({name:"QBreadcrumbsEl",props:{...Y,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:s}){const{linkTag:c,linkAttrs:n,linkClass:m,navigateOnClick:i}=pe(),l=h(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+m.value:"q-breadcrumbs__el--disable"),...n.value,onClick:i})),_=h(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const g=[];return e.icon!==void 0&&g.push(r(z,{class:_.value,name:e.icon})),e.label!==void 0&&g.push(e.label),r(c.value,{...l.value},he(s.default,g))}}});const We=["",!0];var Fe=X({name:"QBreadcrumbs",props:{..._e,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:s}){const c=Se(e),n=h(()=>`flex items-center ${c.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),m=h(()=>e.separatorColor?` text-${e.separatorColor}`:""),i=h(()=>` text-${e.activeColor}`);return()=>{const l=ke(oe(s.default));if(l.length===0)return;let _=1;const g=[],d=l.filter(o=>o.type!==void 0&&o.type.name==="QBreadcrumbsEl").length,y=s.separator!==void 0?s.separator:()=>e.separator;return l.forEach(o=>{if(o.type!==void 0&&o.type.name==="QBreadcrumbsEl"){const p=_<d,C=o.props!==null&&We.includes(o.props.disable),Q=(p===!0?"":" q-breadcrumbs--last")+(C!==!0&&p===!0?i.value:"");_++,g.push(r("div",{class:`flex items-center${Q}`},[o])),p===!0&&g.push(r("div",{class:"q-breadcrumbs__separator"+m.value},y()))}else g.push(o)}),r("div",{class:"q-breadcrumbs"},[r("div",{class:n.value},g)])}}});const x=ye({}),ze=Object.keys(Y);var ue=X({name:"QExpansionItem",props:{...Y,...Oe,...Ge,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Re,"click","afterShow","afterHide"],setup(e,{slots:s,emit:c}){const{proxy:{$q:n}}=we(),m=Me(e,n),i=b(e.modelValue!==null?e.modelValue:e.defaultOpened),l=b(null),_=ne(),{show:g,hide:d,toggle:y}=He({showing:i});let o,p;const C=h(()=>`q-expansion-item q-item-type q-expansion-item--${i.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),Q=h(()=>{if(e.contentInsetLevel===void 0)return null;const a=n.lang.rtl===!0?"Right":"Left";return{["padding"+a]:e.contentInsetLevel*56+"px"}}),w=h(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),D=h(()=>{const a={};return ze.forEach(q=>{a[q]=e[q]}),a}),N=h(()=>w.value===!0||e.expandIconToggle!==!0),O=h(()=>e.expandedIcon!==void 0&&i.value===!0?e.expandedIcon:e.expandIcon||n.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),R=h(()=>e.disable!==!0&&(w.value===!0||e.expandIconToggle===!0)),H=h(()=>({expanded:i.value===!0,detailsId:e.targetUid,toggle:y,show:g,hide:d})),$=h(()=>{const a=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:n.lang.label[i.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":i.value===!0?"true":"false","aria-controls":_,"aria-label":a}});M(()=>e.group,a=>{p!==void 0&&p(),a!==void 0&&ae()});function U(a){w.value!==!0&&y(a),c("click",a)}function G(a){a.keyCode===13&&u(a,!0)}function u(a,q){q!==!0&&l.value!==null&&l.value.focus(),y(a),Ie(a)}function S(){c("afterShow")}function de(){c("afterHide")}function ae(){o===void 0&&(o=ne()),i.value===!0&&(x[e.group]=o);const a=M(i,B=>{B===!0?x[e.group]=o:x[e.group]===o&&delete x[e.group]}),q=M(()=>x[e.group],(B,fe)=>{fe===o&&B!==void 0&&B!==o&&d()});p=()=>{a(),q(),x[e.group]===o&&delete x[e.group],p=void 0}}function ce(){const a={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},q=[r(z,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&i.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:O.value})];return R.value===!0&&(Object.assign(a,{tabindex:0,...$.value,onClick:u,onKeyup:G}),q.unshift(r("div",{ref:l,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),r(F,a,()=>q)}function me(){let a;return s.header!==void 0?a=[].concat(s.header(H.value)):(a=[r(F,()=>[r(te,{lines:e.labelLines},()=>e.label||""),e.caption?r(te,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&a[e.switchToggleSide===!0?"push":"unshift"](r(F,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>r(z,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&a[e.switchToggleSide===!0?"unshift":"push"](ce()),a}function ve(){const a={ref:"item",style:e.headerStyle,class:e.headerClass,dark:m.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return N.value===!0&&(a.clickable=!0,a.onClick=U,Object.assign(a,w.value===!0?D.value:$.value)),r(Ue,a,me)}function ge(){return xe(r("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:Q.value,id:_},oe(s.default)),[[Te,i.value]])}function be(){const a=[ve(),r(Pe,{duration:e.duration,onShow:S,onHide:de},ge)];return e.expandSeparator===!0&&a.push(r(J,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:m.value}),r(J,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:m.value})),a}return e.group!==void 0&&ae(),qe(()=>{p!==void 0&&p()}),()=>r("div",{class:C.value},[r("div",{class:"q-expansion-item__container relative-position"},be())])}});const Je=re({name:"TeamView",props:["data"]}),Xe={key:0},Ye={key:1},Ze={key:2},ea={key:3};function aa(e,s,c,n,m,i){return f(),E(ue,{"expand-separator":"",icon:"groups",label:e.data.name,caption:e.data.manager_name,"header-class":"bg-primary text-white","hide-expand-icon":""},{default:v(()=>[t(ie,{class:"q-pa-md"},{default:v(()=>[ee(P(e.data.manager)+" ",1),e.data.user_members&&e.data.user_members.length>0?(f(),k("b",Xe,"Users")):L("",!0),e.data.user_members&&e.data.user_members.length>0?(f(),k("ol",Ye,[(f(!0),k(A,null,j(e.data.user_members,l=>(f(),k("li",{key:l},P(l),1))),128))])):L("",!0),e.data.group_members&&e.data.group_members.length>0?(f(),k("b",Ze,"Groups")):L("",!0),e.data.group_members&&e.data.group_members.length>0?(f(),k("ol",ea,[(f(!0),k(A,null,j(e.data.group_members,l=>(f(),k("li",{key:l},P(l),1))),128))])):L("",!0)]),_:1})]),_:1},8,["label","caption"])}var ta=Z(Je,[["render",aa]]),na=[{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"value",required:!0,label:"Value",align:"left",field:e=>e.current_value,format:e=>`${e}`,sortable:!0}];const la=re({name:"EPVView",props:["data"],setup(){return{columns:na}}});function oa(e,s,c,n,m,i){return f(),E(ue,{"expand-separator":"",icon:"groups",label:e.data.name,"header-class":"bg-primary text-white","hide-expand-icon":""},{default:v(()=>[t(ie,{class:"q-pa-md"},{default:v(()=>[ee(P(e.data.container_acronym+"-"+e.data.version_acronym)+" ",1),t(se,{title:"EPVs",rows:e.data.epv_variables,columns:e.columns,"row-key":"name"},null,8,["rows","columns"])]),_:1})]),_:1},8,["label"])}var ra=Z(la,[["render",oa]]);const sa=[{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"value",required:!0,label:"Value",align:"left",field:e=>e.value,format:e=>`${e}`,sortable:!0},{name:"container",required:!0,label:"Container",align:"left",field:e=>e.container,format:e=>`${e}`,sortable:!0}],ia={components:{TeamView:ta,EPVView:ra},setup(){De();const e=Ce(),s=Qe(),c=b(e.query.con),n=b(e.query.appName),m=b(e.query.appSName),i=b(e.query.snapId),l=b(e.query.snapSName),_=b(e.query.snapName),g=b("toolkits"),d=b([]),y=b([]),o=b([]),p=b([]),C=b(),Q=b();var w=0;function D(){s.back()}function N(u){var S={};return S.id=w++,S.label=`${u.projectName}(${u.snapshotName})`,u.projDeps&&(S.children=u.projDeps.map(N)),S}function O(){Ke(c.value,i.value,u=>{w=0;var S=u.data.projDeps;S=S.map(N),console.log(S),y.value.splice(0,y.value.length,...S)},u=>{})}function R(){V(c.value,m.value,l.value,"env_vars","Error loading env var details",u=>d.value.splice(0,d.value.length,...u.pairs))}function H(){V(c.value,m.value,l.value,"team_bindings","Error loading team details",u=>o.value.splice(0,o.value.length,...u.team_bindings))}function $(){V(c.value,m.value,l.value,"epvs","Error loading epvs details",u=>p.value.splice(0,p.value.length,...u.epvs))}function U(){V(c.value,m.value,l.value,"webservice","Error loading webservice details",u=>C.value=u)}function G(){V(c.value,m.value,l.value,"rest","Error loading REST details",u=>Q.value=u)}return Ve(()=>{O(),R(),H(),$(),U(),G()}),{tab:g,connection:c,appName:n,appSName:m,snapId:i,snapSName:l,snapName:_,toolkits:y,env_columns:sa,env_rows:d,teams:o,epvs:p,goBack:D}}},ua={class:"q-pa-lg q-gutter-md"},da={class:"q-pa-md q-gutter-sm"},ca={class:"q-pa-md q-gutter-sm"};function ma(e,s,c,n,m,i){const l=K("TeamView"),_=K("EPVView"),g=K("WebService");return f(),E(je,null,{default:v(()=>[t($e,{class:"bg-primary text-white"},{default:v(()=>[t(Ee,{flat:"",round:"",dense:"",icon:"arrow_back",onClick:s[0]||(s[0]=d=>n.goBack())}),t(Ne,null,{default:v(()=>[ee("Snapshot Info")]),_:1})]),_:1}),W("div",ua,[t(Fe,null,{default:v(()=>[t(le,{label:n.appName},null,8,["label"]),t(le,{label:n.snapName},null,8,["label"])]),_:1}),t(Be,{modelValue:n.tab,"onUpdate:modelValue":s[1]||(s[1]=d=>n.tab=d),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":""},{default:v(()=>[t(T,{name:"toolkits",label:"Toolkits"}),t(T,{name:"envs",label:"Enviroment Variables"}),t(T,{name:"teams",label:"Teams"}),t(T,{name:"epvs",label:"EPV"}),t(T,{name:"web_servers",label:"Web Service"}),t(T,{name:"rest_servers",label:"REST Servers"})]),_:1},8,["modelValue"]),t(J),t(Le,{modelValue:n.tab,"onUpdate:modelValue":s[2]||(s[2]=d=>n.tab=d),animated:""},{default:v(()=>[t(I,{name:"toolkits"},{default:v(()=>[W("div",da,[t(Ae,{nodes:n.toolkits,"node-key":"id"},null,8,["nodes"])])]),_:1}),t(I,{name:"envs"},{default:v(()=>[W("div",ca,[t(se,{rows:n.env_rows,columns:n.env_columns},null,8,["rows","columns"])])]),_:1}),t(I,{name:"teams"},{default:v(()=>[(f(!0),k(A,null,j(n.teams,d=>(f(),E(l,{data:d,key:d.name},null,8,["data"]))),128))]),_:1}),t(I,{name:"epvs"},{default:v(()=>[(f(!0),k(A,null,j(n.epvs,d=>(f(),E(_,{data:d,key:d.id},null,8,["data"]))),128))]),_:1}),t(I,{name:"web_servers"},{default:v(()=>[t(g,{data:e.webService},null,8,["data"])]),_:1}),t(I,{name:"rest_servers"},{default:v(()=>[t(g,{data:e.webService},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var Qa=Z(ia,[["render",ma]]);export{Qa as default};
